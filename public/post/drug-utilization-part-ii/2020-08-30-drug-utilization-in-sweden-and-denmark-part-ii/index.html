<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Elena Dudukina">

  
  
  
    
  
  <meta name="description" content="In this part, I will look into the Danish national trends on of sedatives, antidepressants, anti-psychotics and anxiolytics utilization in women. Then I&rsquo;d like to compare Danish national trends with Swedish national trends from Part I.">

  
  <link rel="alternate" hreflang="en-us" href="/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/">

  


  
  
  
  <meta name="theme-color" content="#d1641b">
  

  
  

  
  
  
  
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
    
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_huc9bdaa5444bcbc8205e4a96e0598b383_489098_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_huc9bdaa5444bcbc8205e4a96e0598b383_489098_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/">

  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@evpatora">
  <meta property="twitter:creator" content="@evpatora">
  
  <meta property="og:site_name" content="Elena Dudukina">
  <meta property="og:url" content="/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/">
  <meta property="og:title" content="Drug utilization in Sweden and Denmark: Part II | Elena Dudukina">
  <meta property="og:description" content="In this part, I will look into the Danish national trends on of sedatives, antidepressants, anti-psychotics and anxiolytics utilization in women. Then I&rsquo;d like to compare Danish national trends with Swedish national trends from Part I."><meta property="og:image" content="/images/icon_huc9bdaa5444bcbc8205e4a96e0598b383_489098_512x512_fill_lanczos_center_2.png">
  <meta property="twitter:image" content="/images/icon_huc9bdaa5444bcbc8205e4a96e0598b383_489098_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-08-30T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-08-30T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/"
  },
  "headline": "Drug utilization in Sweden and Denmark: Part II",
  
  "datePublished": "2020-08-30T00:00:00Z",
  "dateModified": "2020-08-30T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Elena Dudukina"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Elena Dudukina",
    "logo": {
      "@type": "ImageObject",
      "url": "/images/icon_huc9bdaa5444bcbc8205e4a96e0598b383_489098_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "In this part, I will look into the Danish national trends on of sedatives, antidepressants, anti-psychotics and anxiolytics utilization in women. Then I\u0026rsquo;d like to compare Danish national trends with Swedish national trends from Part I."
}
</script>

  

  


  


  





  <title>Drug utilization in Sweden and Denmark: Part II | Elena Dudukina</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class=" ">

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Elena Dudukina</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Elena Dudukina</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#publications"><span>Publications</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/files/cv.pdf"><span>CV</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>



  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Drug utilization in Sweden and Denmark: Part II</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    2020-08-30
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    9 min read
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/r/">R</a></span>
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      <p>In this part, I will look into the Danish national trends on of sedatives, antidepressants, anti-psychotics and anxiolytics utilization in women. Then I&rsquo;d like to compare Danish national trends with Swedish national trends from Part I.</p>
<pre><code class="language-r">library(tidyverse)
library(magrittr)
library(wesanderson)
</code></pre>
<p>First things first - uploading data.</p>
<pre><code class="language-r">link_list_dk &lt;- list(
  &quot;1996_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MTk5Nl9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;1997_atc_code_data.txt&quot;  = &quot;https://medstat.dk/da/download/file/MTk5N19hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;1998_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MTk5OF9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;1999_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MTk5OV9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2000_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAwMF9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2001_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAwMV9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2002_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAwMl9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2003_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAwM19hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2004_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAwNF9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2006_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAwNl9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2007_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAwN19hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2008_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAwOF9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2009_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAwOV9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2010_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxMF9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2011_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxMV9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2012_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxMl9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2013_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxM19hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2014_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxNF9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2015_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxNV9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2016_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxNl9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2017_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxN19hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2018_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxOF9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;2019_atc_code_data.txt&quot; = &quot;https://medstat.dk/da/download/file/MjAxOV9hdGNfY29kZV9kYXRhLnR4dA==&quot;,
  &quot;atc_code_text.txt&quot; = &quot;https://medstat.dk/da/download/file/YXRjX2NvZGVfdGV4dC50eHQ=&quot;,
  &quot;atc_groups.txt&quot; = &quot;https://medstat.dk/da/download/file/YXRjX2dyb3Vwcy50eHQ=&quot;,
  &quot;population_data.txt&quot; = &quot;https://medstat.dk/da/download/file/cG9wdWxhdGlvbl9kYXRhLnR4dA==&quot;
)

# ATC codes are stored in files
seq_atc &lt;- c(1:23)
atc_code_data_list &lt;- link_list_dk[seq_atc]
</code></pre>
<p>I will compile data on population size, which I may use to compute denominators for drug utilization per capita.</p>
<pre><code class="language-r"># age structure data
# parse with column type character
age_structure &lt;- read_delim(link_list_dk[[&quot;population_data.txt&quot;]], delim = &quot;;&quot;, col_names = c(paste0(&quot;V&quot;, c(1:7))), col_types = cols(V1 = col_character(), V2 = col_character(), V3 = col_character(), V4 = col_character(), V5 = col_character(), V6 = col_character(), V7 = col_character())) %&gt;%
  # rename and keep columns
  select(year = V1,
         region_text = V2,
         region = V3,
         gender = V4,
         age = V5,
         denominator_per_year = V6) %&gt;% 
  # human-reading friendly label on sex categories
  mutate(
      gender_text = case_when(
      gender == &quot;0&quot; ~ &quot;both sexes&quot;,
      gender == &quot;1&quot; ~ &quot;men&quot;,
      gender == &quot;2&quot; ~ &quot;women&quot;,
      T ~ as.character(gender)
    )
  ) %&gt;% 
  # make numeric variables
  mutate_at(vars(year, age, denominator_per_year), as.numeric) %&gt;% 
  # keep only data for the age categories I will work with and only on women
  filter(age %in% 20:54, gender == &quot;2&quot;) %&gt;% 
  arrange(year, age, region, gender)

age_structure %&gt;% slice(1:10)
</code></pre>
<pre><code>## # A tibble: 10 x 7
##     year region_text region gender   age denominator_per_year gender_text
##    &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;                &lt;dbl&gt; &lt;chr&gt;      
##  1  1996 DK          0      2         20                36363 women      
##  2  1996 DK          0      2         21                36366 women      
##  3  1996 DK          0      2         22                36498 women      
##  4  1996 DK          0      2         23                38452 women      
##  5  1996 DK          0      2         24                37873 women      
##  6  1996 DK          0      2         25                36383 women      
##  7  1996 DK          0      2         26                36115 women      
##  8  1996 DK          0      2         27                37514 women      
##  9  1996 DK          0      2         28                40669 women      
## 10  1996 DK          0      2         29                43619 women
</code></pre>
<p>Danish data has a handy file with all drug classes in English, which I intend to use as labels later on.</p>
<pre><code class="language-r">eng_drug &lt;- read_delim(link_list_dk[[&quot;atc_groups.txt&quot;]], delim = &quot;;&quot;, col_names = c(paste0(&quot;V&quot;, c(1:6))), col_types = cols(V1 = col_character(), V2 = col_character(), V3 = col_character(), V4 = col_character(), V5 = col_character(), V6 = col_character())) %&gt;% 
  # keep drug classes labels in English
  filter(V5 == &quot;1&quot;) %&gt;% 
  select(ATC = V1,
         drug = V2,
         unit_dk = V4)

eng_drug %&gt;% slice(1:10)
</code></pre>
<pre><code>## # A tibble: 10 x 3
##    ATC     drug                                    unit_dk                  
##    &lt;chr&gt;   &lt;chr&gt;                                   &lt;chr&gt;                    
##  1 A       Alimentary tract and metabolism         No common unit for volume
##  2 A01     Stomatological preparations             No common unit for volume
##  3 A01A    Stomatological preparations             No common unit for volume
##  4 A01AA   Caries prophylactic agents              Packages                 
##  5 A01AA01 Sodium fluoride                         Packages                 
##  6 A01AB   Antiinfectives for local oral treatment No common unit for volume
##  7 A01AB02 Hydrogenperoxide                        &lt;NA&gt;                     
##  8 A01AB03 Chlorhexidine                           DDD                      
##  9 A01AB04 Amphotericin                            DDD                      
## 10 A01AB09 Miconazole                              DDD
</code></pre>
<p>I keep only ATC codes I am interested in. I use <code>$</code> in the end of each regular expression (regex) to make sure that I capture the widest ATC code category, which already encompasses all the subcategories. Hypnotics and sedatives - N05C already aggregates N05CA, N05CB, N05CC, N05CD, N05CE, N05CF, N05CH ATC codes.</p>
<pre><code class="language-r">regex_antidepress &lt;- &quot;^N06A$&quot;
regex_antipsych &lt;- &quot;^N05A$&quot;
regex_anxiolyt &lt;- &quot;^N05B$&quot;
regex_sedat &lt;- &quot;^N05C$&quot;

# combine all ATC codes in one regex string
all_regex &lt;- paste(regex_antidepress, regex_antipsych, regex_anxiolyt, regex_sedat, sep = &quot;|&quot;)
</code></pre>
<pre><code class="language-r"># ATC data
atc_data &lt;- map(atc_code_data_list, ~read_delim(file = .x, delim = &quot;;&quot;, trim_ws = T, col_names = c(paste0(&quot;V&quot;, c(1:14))), col_types = cols(V1 = col_character(), V2 = col_character(), V3 = col_character(), V4 = col_character(), V5 = col_character(),V6 = col_character(), V7 = col_character(), V8 = col_character(), V9 = col_character(), V10 = col_character(), V11 = col_character(), V12 = col_character(), V13 = col_character(), V14 = col_character()))) %&gt;% 
  # bind data from all years
  bind_rows() 

# age categories: in 6 year bands and in each year
age_cat_in_6 &lt;- atc_data %&gt;% distinct(V6) %&gt;% filter(row_number() %in% 2:7) %&gt;% pull()
age_cat_in_6
</code></pre>
<pre><code>## [1] &quot;00-17&quot; &quot;18-24&quot; &quot;25-44&quot; &quot;45-64&quot; &quot;65-79&quot; &quot;80+&quot;
</code></pre>
<pre><code class="language-r">age_in_years &lt;- atc_data %&gt;% distinct(V6) %&gt;% filter(row_number() %in% 8:103) %&gt;% pull()
age_in_years
</code></pre>
<pre><code>##  [1] &quot;000&quot; &quot;001&quot; &quot;002&quot; &quot;003&quot; &quot;004&quot; &quot;005&quot; &quot;006&quot; &quot;007&quot; &quot;008&quot; &quot;009&quot; &quot;010&quot; &quot;011&quot;
## [13] &quot;012&quot; &quot;013&quot; &quot;014&quot; &quot;015&quot; &quot;016&quot; &quot;017&quot; &quot;018&quot; &quot;019&quot; &quot;020&quot; &quot;021&quot; &quot;022&quot; &quot;023&quot;
## [25] &quot;024&quot; &quot;025&quot; &quot;026&quot; &quot;027&quot; &quot;028&quot; &quot;029&quot; &quot;030&quot; &quot;031&quot; &quot;032&quot; &quot;033&quot; &quot;034&quot; &quot;035&quot;
## [37] &quot;036&quot; &quot;037&quot; &quot;038&quot; &quot;039&quot; &quot;040&quot; &quot;041&quot; &quot;042&quot; &quot;043&quot; &quot;044&quot; &quot;045&quot; &quot;046&quot; &quot;047&quot;
## [49] &quot;048&quot; &quot;049&quot; &quot;050&quot; &quot;051&quot; &quot;052&quot; &quot;053&quot; &quot;054&quot; &quot;055&quot; &quot;056&quot; &quot;057&quot; &quot;058&quot; &quot;059&quot;
## [61] &quot;060&quot; &quot;061&quot; &quot;062&quot; &quot;063&quot; &quot;064&quot; &quot;065&quot; &quot;066&quot; &quot;067&quot; &quot;068&quot; &quot;069&quot; &quot;070&quot; &quot;071&quot;
## [73] &quot;072&quot; &quot;073&quot; &quot;074&quot; &quot;075&quot; &quot;076&quot; &quot;077&quot; &quot;078&quot; &quot;079&quot; &quot;080&quot; &quot;081&quot; &quot;082&quot; &quot;083&quot;
## [85] &quot;084&quot; &quot;085&quot; &quot;086&quot; &quot;087&quot; &quot;088&quot; &quot;089&quot; &quot;090&quot; &quot;091&quot; &quot;092&quot; &quot;093&quot; &quot;094&quot; &quot;95+&quot;
</code></pre>
<pre><code class="language-r"># clean dataset
atc_data %&lt;&gt;% 
  # rename and keep columns
  rename(
    ATC = V1,
    year = V2,
    sector = V3,
    region = V4,
    gender = V5, # 0 - both; 1 - male; 2 - female
    age = V6,
    number_of_people = V7,
    patients_per_1000_inhabitants = V8,
    turnover = V9,
    regional_grant_paid = V10,
    quantity_sold_1000_units = V11,
    quantity_sold_units_per_unit_1000_inhabitants_per_day = V12,
    percentage_of_sales_in_the_primary_sector = V13
  ) %&gt;% 
  # clean columns names and set-up labels
  mutate(
    year = as.numeric(year),
    region_text = case_when(
      region == &quot;0&quot; ~ &quot;DK&quot;,
      region == &quot;1&quot; ~ &quot;Region Hovedstaden&quot;,
      region == &quot;2&quot; ~ &quot;Region Midtjylland&quot;,
      region == &quot;3&quot; ~ &quot;Region Nordjylland&quot;,
      region == &quot;4&quot; ~ &quot;Region Sjælland&quot;,
      region == &quot;5&quot; ~ &quot;Region Syddanmark&quot;,
      T ~ NA_character_
    ),
    gender_text = case_when(
      gender == &quot;0&quot; ~ &quot;both sexes&quot;,
      gender == &quot;1&quot; ~ &quot;men&quot;,
      gender == &quot;2&quot; ~ &quot;women&quot;,
      T ~ as.character(gender)
    ),
    age_cats = case_when(
      age %in% &quot;A&quot; ~ &quot;A&quot;,
      age %in% age_cat_in_6 ~ &quot;6 years&quot;,
      age %in% age_in_years ~ &quot;yearly categories&quot;,
      age %in% &quot;T&quot; ~ &quot;T&quot;,
      T ~ NA_character_
    )
  ) %&gt;% 
  mutate_at(vars(turnover, regional_grant_paid, quantity_sold_1000_units, quantity_sold_units_per_unit_1000_inhabitants_per_day, number_of_people, patients_per_1000_inhabitants), as.numeric) %&gt;% 
  select(-V14) %&gt;%
  filter(
  age_cats == &quot;yearly categories&quot;,
  gender == &quot;2&quot;,
  region == &quot;0&quot;,
  sector ==&quot;0&quot;
) %&gt;% 
  filter(str_detect(ATC, all_regex)) %&gt;% 
  # deal with non-numeric age and re-code as numeric
  mutate(
    age = case_when(
      age == &quot;95+&quot; ~ &quot;95&quot;,
      T ~ as.character(age)
    ),
    age = as.numeric(age)
    ) %&gt;% 
  filter(age %in% 20:54) %&gt;% 
  mutate(
    age_cat = case_when(
      age %in% 20:24 ~ &quot;20-24&quot;,
      age %in% 25:34 ~ &quot;25-34&quot;,
      age %in% 35:44 ~ &quot;35-44&quot;,
      age %in% 45:54 ~ &quot;45-54&quot;,
      T ~ NA_character_
    )
) %&gt;% 
  left_join(age_structure) %&gt;% 
  group_by(ATC, year, age_cat) %&gt;% 
  mutate(
    numerator = sum(number_of_people),
    denominator = sum(denominator_per_year),
    patients_per_1000_inhabitants = numerator / denominator * 1000
  ) %&gt;% 
  filter(row_number() == 1) %&gt;% 
  ungroup() %&gt;% 
  select(year, ATC, gender, age_cat, patients_per_1000_inhabitants) %&gt;% 
  mutate(
    country = &quot;Denmark&quot;
  )
</code></pre>
<pre><code>## Joining, by = c(&quot;year&quot;, &quot;region&quot;, &quot;gender&quot;, &quot;age&quot;, &quot;region_text&quot;, &quot;gender_text&quot;)
</code></pre>
<pre><code class="language-r">atc_data %&gt;% slice(1:10)
</code></pre>
<pre><code>## # A tibble: 10 x 6
##     year ATC   gender age_cat patients_per_1000_inhabitants country
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;                           &lt;dbl&gt; &lt;chr&gt;  
##  1  1999 N05A  2      20-24                            5.60 Denmark
##  2  1999 N05A  2      25-34                            9.71 Denmark
##  3  1999 N05A  2      35-44                           19.9  Denmark
##  4  1999 N05A  2      45-54                           29.4  Denmark
##  5  1999 N05B  2      20-24                           12.5  Denmark
##  6  1999 N05B  2      25-34                           26.3  Denmark
##  7  1999 N05B  2      35-44                           61.7  Denmark
##  8  1999 N05B  2      45-54                          106.   Denmark
##  9  1999 N05C  2      20-24                            7.86 Denmark
## 10  1999 N05C  2      25-34                           18.0  Denmark
</code></pre>
<pre><code class="language-r"># combine Swedish data from previous post and Danish data
data &lt;- data_se %&gt;% 
  select(year, ATC, gender, age_cat, patients_per_1000_inhabitants) %&gt;% 
  mutate(
    country = &quot;Sweden&quot;
  ) %&gt;% 
  full_join(atc_data) %&gt;% 
  # join with ATC classes labels in English
  left_join(eng_drug)
</code></pre>
<pre><code>## Joining, by = c(&quot;year&quot;, &quot;ATC&quot;, &quot;gender&quot;, &quot;age_cat&quot;, &quot;patients_per_1000_inhabitants&quot;, &quot;country&quot;)
</code></pre>
<pre><code>## Joining, by = &quot;ATC&quot;
</code></pre>
<p>To avoid copy-pasting the same ggplot code, I use a wrapper around the plotting function.</p>
<pre><code class="language-r">plot_utilization &lt;- function(data, drug_regex, title){
  data %&gt;% 
  filter(str_detect(ATC, {{ drug_regex }})) %&gt;% 
  group_by(country) %&gt;% 
  ggplot(aes(x = year, y = patients_per_1000_inhabitants, color = country)) +
  geom_path(position = position_dodge(width = 1)) +
  facet_grid(rows = vars(drug, ATC), cols = vars(age_cat), scales = &quot;free&quot;, drop = T) +
  theme_light(base_size = 14) +
  scale_x_continuous(breaks = c(seq(1999, 2019, 10))) +
  scale_color_manual(values = wes_palette(name = &quot;GrandBudapest1&quot;, type = &quot;discrete&quot;)) +
  theme(plot.caption = element_text(hjust = 0),
        legend.position = &quot;bottom&quot;,
        panel.spacing = unit(0.8, &quot;cm&quot;)) +
  labs(y = &quot;Female patients\nper 1,000 women in the population&quot;, title = paste0(title, &quot; utilization in Swedish and Danish women&quot;), subtitle = &quot;aged between 20 and 54 years&quot;)
}

list_regex &lt;- list(regex_antidepress, regex_antipsych, regex_anxiolyt, regex_sedat)
list_title &lt;- list(&quot;Antidepressants&quot;, &quot;Antipsychotics&quot;, &quot;Anxiolytics&quot;, &quot;Sedatives&quot;)
list_plots &lt;- map2(list_regex, list_title, ~plot_utilization(data = data, drug_regex = .x, title = .y))
</code></pre>
<h1 id="results">Results</h1>
<pre><code class="language-r">list_plots[[1]]
</code></pre>
<p><img src="/post/Drug-utilization-part-ii/2020-08-30-drug-utilization-in-Sweden-and-Denmark-part-ii_files/figure-html/unnamed-chunk-11-1.png" width="672" />
Among Danish women aged between 20 and 54 years, antidepressants utilizatioin was steadily decreasing, while utilization among Swedish women was increasing. In Denmark, 56 women aged between 20-24 and 72 women aged between 35-45 56 per 1000 women in the population received antidepressants prescription.</p>
<pre><code class="language-r">list_plots[[2]]
</code></pre>
<p><img src="/post/Drug-utilization-part-ii/2020-08-30-drug-utilization-in-Sweden-and-Denmark-part-ii_files/figure-html/unnamed-chunk-12-1.png" width="672" />
Antipsychotics utilization was increasing over the years in both Denmark and Sweden. The rates of antipsychotics utilization were higher among Danish women when compared to Swedish women in the same age categories.</p>
<pre><code class="language-r">list_plots[[3]]
</code></pre>
<p><img src="/post/Drug-utilization-part-ii/2020-08-30-drug-utilization-in-Sweden-and-Denmark-part-ii_files/figure-html/unnamed-chunk-13-1.png" width="672" />
Anxiolytics utilization rates were higher among Swedish women. In Denmark, anxiolytics utilization was decreasing since 1999 until 2019 for women in all age categories between 20 and 54 years.</p>
<pre><code class="language-r">list_plots[[4]]
</code></pre>
<p><img src="/post/Drug-utilization-part-ii/2020-08-30-drug-utilization-in-Sweden-and-Denmark-part-ii_files/figure-html/unnamed-chunk-14-1.png" width="672" />
The rates of sedatives utilization were higher for Swedish women when compared with Danish women of the same age groups. Utilization of sedatives among Danish women was below 50 women per 1000 women of the same age group in the population in all investigated age categories. Among Swedish women, the rate of sedatives utilization was below 50 women per 1000 women in the population only for women between 20 and 24 years of age.</p>
<h1 id="take-home-message">Take home message</h1>
<ul>
<li>Countries similar in many ways may exhibit different data patterns</li>
<li>Antidepressants, antipsychotics, anxiolytics, and sedatives utilization among Danish and Swedish women is far from identical</li>
</ul>
<p>Thanks for tuning in 🤓</p>
<p>All feedback is appreciated ✌️</p>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/data-analysis/">Data analysis</a>
  
  <a class="badge badge-light" href="/tag/rstats/">Rstats</a>
  
  <a class="badge badge-light" href="/tag/tidyverse/">tidyverse</a>
  
  <a class="badge badge-light" href="/tag/drug-utilization/">drug utilization</a>
  
  <a class="badge badge-light" href="/tag/pharmacoepidemiology/">pharmacoepidemiology</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/&amp;text=Drug%20utilization%20in%20Sweden%20and%20Denmark:%20Part%20II" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/&amp;t=Drug%20utilization%20in%20Sweden%20and%20Denmark:%20Part%20II" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Drug%20utilization%20in%20Sweden%20and%20Denmark:%20Part%20II&amp;body=/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/&amp;title=Drug%20utilization%20in%20Sweden%20and%20Denmark:%20Part%20II" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Drug%20utilization%20in%20Sweden%20and%20Denmark:%20Part%20II%20/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/drug-utilization-part-ii/2020-08-30-drug-utilization-in-sweden-and-denmark-part-ii/&amp;title=Drug%20utilization%20in%20Sweden%20and%20Denmark:%20Part%20II" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/author/elena-dudukina/avatar_hub94ed909de68ef2f7bd91a471236bb47_211159_270x270_fill_q90_lanczos_center.jpg" alt="Elena Dudukina">
      

      <div class="media-body">
        <h5 class="card-title"><a href="/">Elena Dudukina</a></h5>
        <h6 class="card-subtitle">PhD student in Epidemiology</h6>
        <p class="card-text">I am interested in women&rsquo;s health, reproductive epidemiology, pharmacoepidemiology, causal inference, directed acyclic graphs, and R stats.</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/evpatora" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/evpatora" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com/citations?user=jIw5tCMAAAAJ&amp;hl=en" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://orcid.org/0000-0002-4238-049X" target="_blank" rel="noopener">
        <i class="ai ai-orcid"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  














  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/drug-utilization-part-i/2020-08-30-drug-utilization-in-sweden-and-denmark/">Drug utilization in Sweden and Denmark: Part I</a></li>
      
    </ul>
  </div>
  





  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js" integrity="sha512-7t8APmYpzEsZP7CYoA7RfMPV9Bb+PJHa9x2WiUnDXZx3XHveuyWUtvNOexhkierl5flZ3tr92dP1mMS+SGlD+A==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.3b2b658c61ebd725bd5fc606c89fe44c.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/terms/">Terms</a>
    
  </p>
  

  <p class="powered-by">
    ©2020
  </p>

  
  





  
  
  
  

  
  
    
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">CC BY NC ND 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">
      <img src="https://search.creativecommons.org/static/img/cc_icon.svg" alt="CC icon">
      <img src="https://search.creativecommons.org/static/img/cc-by_icon.svg" alt="CC by icon">
      
        <img src="https://search.creativecommons.org/static/img/cc-nc_icon.svg" alt="CC NC icon">
      
      
        <img src="https://search.creativecommons.org/static/img/cc-nd_icon.svg" alt="CC ND icon">
      
    </a>
  </p>




  <p class="powered-by">
    
    Published with
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic Website Builder</a>
    

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
